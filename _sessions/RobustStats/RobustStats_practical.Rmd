---
title: "Robust Statistics"
author: "<table style='table-layout:fixed;width:100%;border:0;padding:0;margin:0'><col width='10%'><col width='10%'>
  <tr style='border:none'>
    <td style='display:block;width:100%;text-align:left;vertical-align:bottom;padding:0;margin:0;border:none' nowrap>
      <font style='font-style:normal'>Statistics with R</font><br>
      <a href='https://therbootcamp.github.io/SWR_2019Apr/'>
        <i class='fas fa-clock' style='font-size:.9em;' ></i>
      </a>
      <a href='https://therbootcamp.github.io'>
        <i class='fas fa-home' style='font-size:.9em;'></i>
      </a>
      <a href='mailto:therbootcamp@gmail.com'>
        <i class='fas fa-envelope' style='font-size: .9em;'></i>
      </a>
      <a href='https://www.linkedin.com/company/basel-r-bootcamp/'>
        <i class='fab fa-linkedin' style='font-size: .9em;'></i>
      </a>
      <a href='https://therbootcamp.github.io'>
        <font style='font-style:normal'>Basel R Bootcamp</font>
      </a>
    </td>
    <td style='width:100%;vertical-align:bottom;text-align:right;padding:0;margin:0;border:none'>
      <img src='https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/by-sa.png' style='height:15px;width:80px'/>
    </td>
  </tr></table>"
output:
  html_document:
    css: practical.css
    self_contained: no
---

```{r setup, echo = FALSE, message = FALSE, warning = FALSE}
knitr::opts_chunk$set(comment = NA, 
                      fig.width = 6, 
                      fig.height = 6,
                      fig.align = 'center',
                      echo = FALSE, 
                      eval = FALSE, 
                      warning = FALSE)

options(digits = 3)

# Load packages
library(tidyverse)

# Load packages
#read_csv("1_Data/...")

```

<p align="center" width="100%">
  <img src="image/avocado_small.png" alt="Trulli" style="width:100%y">
  <br>
  <font style="font-size:10px">from <a href="https://www.self.com/story/how-to-pick-the-best-avocado-every-time">self.com</a></font>
</p>


# {.tabset}

## Overview

In this practical you'll explore issues sourrounding the topic of robust statistics using a variety of packages (see *Functions*) tab. You'll will explore sales of avocados across various locations in the US from 2015 to 2018. 

By the end of this practical you will know how to:

1. Evaluate regression assumptions.
2. Run off-the-shelve non-parametric tests.
3. Run bootsrap analyses.

## Tasks

### A - Setup

1. Open your `BaselRBootcamp` R project. It should already have the folders `1_Data` and `2_Code`. Make sure that the data files listed in the `Datasets` section above are in your `1_Data` folder

```{r}
# Done!
```

2. Open a new R script. At the top of the script, using comments, write your name and the date. Save it as a new file called `robuststats_practical.R` in the `2_Code` folder.  

```{r}
# Done!
```

3. Using `library()` load the `tidyverse` package (if you don't have it, you'll need to install it with `install.packages()`)!

```{r, echo = TRUE, eval = FALSE}
# Load packages necessary for this script
library(tidyverse)
library(boot)
library(quantreg)
library(Rfit)
```

4. Using the following template, load the `avocado.csv`, `avocado_cali.csv`, and `avocado_ny.csv` data sets into R and store them as a new objects called `avocado`, `avocado_cali`, and `avocado_ny` (Hint: Don't type the path directly! Use the "tab" completion!).

```{r, echo = TRUE}
# Load XXX.csv from the 1_Data folder

XX <- read_csv(file = "XX/XX")
```

```{r, echo = TRUE}
# Load data sets from the 1_Data folder

avocado <- read_csv(file = "1_Data/avocado.csv")
avocado_cali <- read_csv(file = "1_Data/avocado_cali.csv")
avocado_ny <- read_csv(file = "1_Data/avocado_ny.csv")
```

5. Take a look at the first few rows of the data sets by printing them to the console.

```{r, echo = TRUE}
# Print XXX object
XXX
```

```{r}
# Print XXX object
XXXavocado
avocado_cali
avocado_ny
```

7. Use the the `summary()` function to print more details on the columns of the data sets.

```{r, echo = TRUE}
# Show summary of XXX object
summary(XXX)
```

```{r}
# Show summary of XXX object
summary(avocado)
summary(avocado_cali)
summary(avocado_ny)
```

8. Use the `View()` function to view the entire data sets in new windows

```{r, echo = TRUE}
# View data frame XXX 
View(XXX)
```

```{r, eval = F}
# View data frame XXX 
View(avocado)
View(avocado_cali)
View(avocado_ny)
```

### B - Missing variables

1. In this pracical you will be working with a data set containing information on the sales volume of avocados across various areas in the US and over the the last three years. Your initial goal is to predict, whether  

```{r, echo = TRUE}
# View data frame XXX 
View(XXX)
```


### C - Normality & Homoscedasticity



### D - Non-parametric tests

### E - Robust regression


### F - Bootstrap


## Examples

```{r, eval = FALSE, echo = TRUE}

# PRELIMINARIES ------------------------------

require(moments)
require(quantreg)
require(Rfix)




```


## Datasets

|File | Rows | Columns |
|:----|:-----|:------|
|[avocado.csv]() | 17573 | 16 |
|[avocado_cali.csv]() | 338 | 16 |
|[avocado_ny.csv]() | 338 | 16 |

This data was downloaded from the [Hass](https://en.wikipedia.org/wiki/Hass_avocado) Avocado Board website for the duration of April 2015 and May 2018. The data contain weekly (reported on Sundays) retail scan data for National retail volume (units) and price. Retail scan data comes directly from retailersâ€™ cash registers based on actual retail sales of Hass avocados. The Average Price (of avocados) in the table reflects a per unit (per avocado) cost. Other varieties of avocados (e.g. greenskins) are not included in this table.

The data set `avocado.csv` contains the data for all 52 regions. The smaller datasets `avocado_cali.csv` and `avocado_ny.csv` contain the data of California and New York, respectively.

#### Variable description

| Name | Description |
|:-------------|:-------------------------------------|
| `volume` | The total number of sold avocados that week. |
| `volume_index` | A sales index scaling the sales number to the range of 0 to 10.  |
| `price_per_avocado` | The average price of a single avocado. |
| `type` | The type of avocado: "conventional" or "organic". |
| `temperature` | The regional temperature on the day of the data recording. |
| `temperature_usa` | The country-wide temperature on the day of the data recording. |
| `humidity` | The regional humidity on the day of the data recording. |
| `humidity_usa` | The country-wide humidity on the day of the data recording. |
| `precipation` | The regional precipation on the day of the data recording. |
| `precipation_usa` | The country-wide precipation on the day of the data recording. |
| `year` | The year of the data recording. |
| `season` | The season of the data recording. |
| `date` | The date of the data recording. |
| `region` | The region for which sales were recorded. |
| `longitude` | The longitude of the region center. |
| `latitude` | The latitude of the region center. |

## Functions

### Packages

|Package| Installation|
|:------|:------|
|`moments`|`install.packages("moments")`|
|`quantreg`|`install.packages("quantreg")`|
|`Rfit`|`install.packages("Rfit")`|

### Functions

| Function| Package | Description |
|:---|:------|:---------------------------------------------|
|     `XXX`|`XXX`| XXX | 
|     `XXX`|`XXX`| XXX | 

## Resources

### vignettes

TEXT and LINKS

### Cheatsheets

<p align="center" width="100%">
<a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">
  <img src="https://image.slidesharecdn.com/data-wrangling-cheatsheet-160705210122/95/data-wrangling-with-dplyr-and-tidyr-cheat-sheet-1-638.jpg?cb=1467752577" style="width:70%"></a>
  <br>
  <font style="font-size:10px">from <a href="https://www.rstudio.com/resources/cheatsheets/">R Studio</a></font>
</p>
